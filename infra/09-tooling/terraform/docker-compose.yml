name: terraform

services:
  terraform:
    extends:
      file: ../../common-optimizations.yml
      service: template-infra-med
    image: hashicorp/terraform:1.14.4
    container_name: terraform
    restart: 'no'
    volumes:
      - ./workspace:/workspace
      # - $HOME/.config/gcloud:/root/.config/gcloud:ro # Optional: For GCP Auth
      - $HOME/.aws:/root/.aws:ro # Optional: For AWS Auth (Read-Only)
      - $HOME/.azure:/root/.azure:ro # Optional: For Azure Auth (Read-Only)
    working_dir: /workspace
    entrypoint: ['terraform']
    networks:
      - infra_net
